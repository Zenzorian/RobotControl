# Robot Client –¥–ª—è Linux

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –≤ Linux:
- `CameraSearch` - –ø–æ–∏—Å–∫ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è USB –≤–µ–±-–∫–∞–º–µ—Ä
- `PixhawkControl` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ—Ç–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º Pixhawk —á–µ—Ä–µ–∑ USB

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üì∑ CameraSearch
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ USB –≤–µ–±-–∫–∞–º–µ—Ä** –≤ Linux
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞**: —á–µ—Ä–µ–∑ `v4l2-ctl` –∏ `udevadm`
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö**: –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å, –º–æ–¥–µ–ª—å, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è, —Ñ–æ—Ä–º–∞—Ç—ã
- **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: —Ä–∞–∑–ª–∏—á–∞–µ—Ç –∫–∞–º–µ—Ä—ã –∏ –¥—Ä—É–≥–∏–µ –≤–∏–¥–µ–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### üöÅ PixhawkControl
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ Pixhawk** —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —á–µ—Ä–µ–∑ USB
- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è MAVLink –±–∏–±–ª–∏–æ—Ç–µ–∫–∞** –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–π —Å–≤—è–∑–∏
- **PWM —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–∞–º–∏** —Å –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º —Å–∫–æ—Ä–æ—Å—Ç–µ–π -1.0 –¥–æ 1.0
- **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ—Ç–æ—Ä–æ–≤
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ ArduPilot –∏ PX4** –ø—Ä–æ—à–∏–≤–æ–∫

## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
- Linux (Debian/Ubuntu –∏ –¥—Ä—É–≥–∏–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—ã)
- .NET 8.0

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã
```bash
sudo apt update
sudo apt install v4l-utils udev
```

## –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –î–ª—è –≤–µ–±-–∫–∞–º–µ—Ä
```bash
# –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É video
sudo usermod -a -G video $USER
```

### –î–ª—è Pixhawk (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã)
```bash
# –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É dialout
sudo usermod -a -G dialout $USER

# –ü–µ—Ä–µ–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å
newgrp dialout
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ–∏—Å–∫ –≤–µ–±-–∫–∞–º–µ—Ä
```csharp
using RobotClient.Camera;

var cameraSearch = new CameraSearch();
var cameras = cameraSearch.FindUsbWebcams();

foreach (var camera in cameras)
{
    Console.WriteLine($"–ù–∞–π–¥–µ–Ω–∞ –∫–∞–º–µ—Ä–∞: {camera.Name}");
    Console.WriteLine($"  –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: {camera.DevicePath}");
    Console.WriteLine($"  –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å: {camera.Manufacturer}");
    Console.WriteLine($"  –†–∞–∑—Ä–µ—à–µ–Ω–∏—è: {string.Join(", ", camera.SupportedResolutions)}");
}
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Pixhawk
```csharp
using RobotClient.Pixhawk;

using var pixhawk = new PixhawkControl();

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
if (pixhawk.Connect())
{
    Console.WriteLine("Pixhawk –ø–æ–¥–∫–ª—é—á–µ–Ω!");
    
    // –î–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥
    pixhawk.SetWheelSpeeds(0.5f, 0.5f);
    Thread.Sleep(2000);
    
    // –ü–æ–≤–æ—Ä–æ—Ç –Ω–∞–ø—Ä–∞–≤–æ
    pixhawk.SetWheelSpeeds(0.5f, -0.5f);
    Thread.Sleep(1000);
    
    // –û—Å—Ç–∞–Ω–æ–≤–∫–∞
    pixhawk.StopMotors();
}
```

## –ó–∞–ø—É—Å–∫

```bash
dotnet build
dotnet run
```

## –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç:

1. **–ü–æ–∏—Å–∫ USB –≤–µ–±-–∫–∞–º–µ—Ä** - —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –∫–∞–º–µ—Ä—ã
2. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Pixhawk** - –∏—â–µ—Ç –∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ø–æ–ª–µ—Ç–Ω–æ–º—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** - –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è (–µ—Å–ª–∏ Pixhawk –ø–æ–¥–∫–ª—é—á–µ–Ω)
4. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–æ–±–æ—Ç–æ–º —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:
   - `W` - –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥
   - `S` - –¥–≤–∏–∂–µ–Ω–∏–µ –Ω–∞–∑–∞–¥  
   - `A` - –ø–æ–≤–æ—Ä–æ—Ç –≤–ª–µ–≤–æ
   - `D` - –ø–æ–≤–æ—Ä–æ—Ç –≤–ø—Ä–∞–≤–æ
   - `X` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
   - `Q` - –≤—ã—Ö–æ–¥

## –û—Ç–ª–∞–¥–∫–∞

### –í–µ–±-–∫–∞–º–µ—Ä—ã
–ï—Å–ª–∏ –∫–∞–º–µ—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
ls /dev/video*

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
v4l2-ctl --list-devices

# USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
lsusb | grep -i camera
```

### Pixhawk
–ï—Å–ª–∏ Pixhawk –Ω–µ –Ω–∞–π–¥–µ–Ω:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã
ls /dev/ttyACM* /dev/ttyUSB*

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
lsusb | grep -E "(3DR|Pixhawk|PX4)"

# –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ—Ä—Ç–∞–º
ls -la /dev/ttyACM*

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä—É–ø–ø—ã dialout
groups $USER
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–æ–≤

### CameraSearch
```csharp
public class CameraSearch
{
    public List<CameraInfo> FindUsbWebcams() // –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –ø–æ–∏—Å–∫–∞
}

public class CameraInfo
{
    public string Name { get; set; }
    public string DevicePath { get; set; }    // /dev/video0
    public string Manufacturer { get; set; }
    public List<string> SupportedResolutions { get; set; }
}
```

### PixhawkControl
```csharp
public class PixhawkControl : IDisposable
{
    public bool IsConnected()                           // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    public bool Connect()                               // –ü–æ–∏—Å–∫ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
    public bool SetWheelSpeeds(float left, float right) // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–∞–º–∏
    public bool StopMotors()                            // –û—Å—Ç–∞–Ω–æ–≤–∫–∞
    public void Disconnect()                            // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ
}
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ü—Ä–æ–µ–∫—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è Linux
- CameraSearch –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ USB UVC –∫–∞–º–µ—Ä—ã
- PixhawkControl –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MAVLink –ø—Ä–æ—Ç–æ–∫–æ–ª
- –í—Å–µ –º–µ—Ç–æ–¥—ã –≤–∫–ª—é—á–∞—é—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –º–æ—Ç–æ—Ä–æ–≤ 

## MAVLink Integration

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é MAVLink –±–∏–±–ª–∏–æ—Ç–µ–∫—É –≤–µ—Ä—Å–∏–∏ 1.0.8:

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- **Heartbeat —Å–æ–æ–±—â–µ–Ω–∏—è** –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–≤—è–∑–∏
- **RC_CHANNELS_OVERRIDE** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ—Ç–æ—Ä–∞–º–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥** –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ MAVLink 2.0** –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
- **ArduPilot** (Copter, Rover, Plane)
- **PX4** –∞–≤—Ç–æ–ø–∏–ª–æ—Ç
- **Pixhawk**, **Cube**, **Holybro** –∏ –¥—Ä—É–≥–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤:
```bash
# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤
lsusb

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ—Ä—Ç–∞—Ö
ls -la /dev/ttyACM* /dev/ttyUSB*

# –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
udevadm info --name=/dev/ttyACM0
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–º–µ—Ä:
```bash
# –°–ø–∏—Å–æ–∫ –≤–∏–¥–µ–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤
v4l2-ctl --list-devices

# –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–∞–º–µ—Ä—ã
v4l2-ctl --device=/dev/video0 --list-formats-ext
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MAVLink:
```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ –ø–æ—Ä—Ç—É
sudo minicom -D /dev/ttyACM0 -b 57600

# –ò–ª–∏ —Å –ø–æ–º–æ—â—å—é screen
screen /dev/ttyACM0 57600
```

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### ArduPilot Rover
```
SYSID_THISMAV = 1
SERIAL2_PROTOCOL = 2  # MAVLink 2
SERIAL2_BAUD = 57     # 57600 baud
```

### PX4
```
MAV_SYS_ID = 1
SER_TEL2_BAUD = 57600
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### Pixhawk –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ USB –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∞—Ö –¥–æ—Å—Ç—É–ø–∞ (–≥—Ä—É–ø–ø–∞ `dialout`)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ USB –ø–æ—Ä—Ç—ã

### –ö–∞–º–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ USB –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∞—Ö –¥–æ—Å—Ç—É–ø–∞ (–≥—Ä—É–ø–ø–∞ `video`)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É V4L2: `ls /dev/video*`

### –û—à–∏–±–∫–∏ MAVLink:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–æ–±—ã—á–Ω–æ 57600 –∏–ª–∏ 115200)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MAVLink –≤–∫–ª—é—á–µ–Ω –≤ –ø—Ä–æ—à–∏–≤–∫–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å system ID –∏ component ID

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π. 