# Сервер управления роботом

Сервер для обеспечения WebRTC коммуникации между клиентом управления и роботом.

## Функциональность

- Сигнальный сервер для установления WebRTC соединений
- Передача команд управления от клиента к роботу
- Передача телеметрии и видеопотока от робота к клиенту управления
- Поддержка нескольких типов сообщений (OFFER, ANSWER, CANDIDATE, COMMAND, TELEMETRY)

## Установка

```bash
# Клонировать репозиторий
git clone <ваш-репозиторий>

# Перейти в директорию проекта
cd <директория-проекта>

# Установить зависимости
npm install
```

## Запуск сервера

```bash
# Запуск в режиме разработки
npm run dev

# Запуск в продакшн режиме
npm start
```

По умолчанию сервер запускается на порту 8080. Вы можете изменить порт, установив переменную окружения PORT:

```bash
PORT=3000 npm start
```

## Протокол взаимодействия

### Регистрация клиентов

- Клиент управления: `REGISTER!CONTROLLER`
- Клиент робота: `REGISTER!ROBOT`

### Формат сообщений

Все сообщения имеют формат: `ТИП!ДАННЫЕ` или `ТИП!ID!ДАННЫЕ`, где:
- `ТИП` - тип сообщения (OFFER, ANSWER, CANDIDATE, COMMAND, TELEMETRY)
- `ID` - идентификатор (опционально, для некоторых сообщений)
- `ДАННЫЕ` - JSON данные или текстовая информация

### Типы сообщений

- `OFFER` - SDP предложение для установления WebRTC соединения
- `ANSWER` - SDP ответ на предложение
- `CANDIDATE` - ICE-кандидаты для установления P2P соединения
- `COMMAND` - команды управления роботом
- `TELEMETRY` - данные телеметрии от робота

## Интеграция с Unity

Для интеграции с Unity-клиентом необходимо настроить WebSocket соединение, используя класс `WebSocket` из библиотеки WebSocketSharp и обрабатывать сообщения в соответствии с протоколом.
